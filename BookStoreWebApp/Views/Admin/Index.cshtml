@model BookStoreWebApp.Models.AdminModel

@{
    ViewData["Title"] = "Index";

    int userCount = Model.Users.ToList().Count;
    int bookCount = Model.Books.ToList().Count;
    int orderCount = Model.Orders.ToList().Count;

    double total = 0;

    foreach (var order in Model.Orders)
    {
        if(order.Status == "Completed")
        {
            total+=order.TotalAmount;
        }
    }

}

<div class="container" style="margin-left: 1em; margin-top: 2em">
    <div class="col">
        <div class="row">
            <div class="col-3">
                <h1 style="margin-bottom: 2em">Dashboard</h1>
                <div class="row">
                    <a class="text-primary link-underline-opacity-0 link-offset-2 link-underline"
                       style="margin-bottom: 1em"><h4>Books</h4></a>
                </div>
                <div class="row">
                    <a class="text-primary link-underline-opacity-0 link-offset-2 link-underline"
                       style="margin-bottom: 1em"><h4>Orders</h4></a>
                </div>
                <div class="row">
                    <a class="text-primary link-underline-opacity-0 link-offset-2 link-underline"
                       style="margin-bottom: 1em"><h4>Users</h4></a>
                </div>
            </div>
            <div class="col-9">
                <div class="row">
                    <div class="col">
                        <h3>@userCount</h3>
                        <h6>Users</h6>
                    </div>
                    <div class="col">
                        <h3>@bookCount</h3>
                        <h6>Books</h6>
                    </div>
                    <div class="col">
                        @if (total > 1000)
                        {
                            <h3>@(Math.Round(total / 1000, 2))K</h3>
                        }
                        else
                        {
                            <h3>@total.ToString("F2")</h3>
                        }

                        <h6>Sales</h6>
                    </div>


                    <div class="col">
                        <h3>@orderCount</h3>
                        <h6>Orders</h6>
                    </div>
                </div>
                <div class="row" style="margin-top: 5em">
                    <h3 style="margin-bottom: 0.5em;">Pending Orders</h3>
                </div>
                <div class="row">
                    <div class="col">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th scope="col">OrderId</th>
                                    <th scope="col">Client</th>
                                    <th scope="col">Date</th>
                                    <th scope="col">Amount</th>
                                    <th scope="col">Status</th>
                                    <th scope="col">View</th>
                                </tr>
                            </thead>
                            <tbody>
                               @foreach (var order in Model.Orders)
                                {
                                    if (order.Status == "Pending")
                                    {
                                        <tr>
                                            <th scope="row">@order.Id</th>
                                            <td>@order.UserId</td>
                                            <td>@order.DateTime</td>
                                            <td>@order.TotalAmount</td>
                                            <td><span class="badge text-bg-warning">Pending</span></td>
                                            <td>View</td>
                                        </tr>
                                    }
                                }

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
